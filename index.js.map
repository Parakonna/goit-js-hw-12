{"version":3,"file":"index.js","sources":["../src/js/pixabay.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '45523262-d0ffc350dbb21d9b3ec29cf8d';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchPhotos = async (searchQuery, page) => {\n  const urlParams = new URLSearchParams({\n    orientation: 'horizontal',\n    image_type: 'photo',\n      safesearch: true,\n      key: API_KEY,\n      q: searchQuery,\n      page,\n      per_page: 15,\n  });\n\n    const {data} = await axios.get(`${BASE_URL}?${urlParams}`);\n    return data;\n};","export const createGalleryCard = imgInfo => {\n    return ` <li class=\"gallery-card\">\n    <a href=\"${imgInfo.largeImageURL}\">\n    <img class=\"gallery-img\"\n    src=\"${imgInfo.webformatURL}\" \n    alt=\"${imgInfo.tags}\" />\n    </a>\n    <div class=\"wrapper\">\n    <ul class=\"img-content-wrapper\">\n      <li class=\"text-info\">\n        Likes<span class=\"number\">${imgInfo.likes}</span>\n      </li>\n      <li class=\"text-info\">\n        Views<span class=\"number\">${imgInfo.views}</span>\n      </li>\n      <li class=\"text-info\">\n        Comments<span class=\"number\">${imgInfo.comments}</span>\n      </li>\n      <li class=\"text-info\">\n        Downloads<span class=\"number\">${imgInfo.downloads}</span>\n      </li>\n    </ul>\n  </div>\n    </li>`;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchPhotos } from './js/pixabay.js';\nimport { createGalleryCard } from './js/render-functions.js';\n\nlet currentPaga = 1;\nlet searchedValue = \"\";\n\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEL = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreEl = document.querySelector('.loader-more');\n\nfunction showLoader() {\n  loaderEl.classList.remove('is-hidden');\n}\nfunction hideLoader() {\n  loaderEl.classList.add('is-hidden');\n}\n\nshowLoader();\nsetTimeout(hideLoader, 2000);\n\nconst onSearchFormSubmit = async event => {\n    event.preventDefault();\n searchedValue = searchFormEl.elements.user_query.value.trim();\n    currentPaga = 1;\n    try {\n        const data = await fetchPhotos(searchedValue, currentPaga)\n        if (searchedValue === '') {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Input field must not be empty',\n      position: 'topLeft',\n    });\n            galleryEL.innerHTML = '';\n            searchFormEl.reset();\n    return;\n  }\n      if (data.hits.length === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n          galleryEL.innerHTML = '';\n        searchFormEl.reset();\n        return;\n      }\n            console.log(data);\n            const galleryCards = data.hits.map(imgDetals => createGalleryCard(imgDetals)).join('');\n        galleryEL.innerHTML = galleryCards;\n        \n        smoothScroll();\n         \n         const lightbox = new SimpleLightbox('.js-gallery a', {\n        overlay: true,\n        captionsData: 'alt',\n        overlayOpacity: 0.8,\n        captionDelay: 250,\n        focus: true,\n      });\n        lightbox.refresh();\n        if (data.totalHits > 15) {\n        loadMoreEl.classList.remove('is-hidden')\n    }\n} catch (error) {\n    iziToast.error({ message: error.message}); \n}\n}\n\nconst onLoadMore = async (event) => {\n    event.preventDefault();\n searchedValue = searchFormEl.elements.user_query.value.trim();\n    currentPaga = 1;\n    try {\n        const data = await fetchPhotos(searchedValue, currentPaga)\n\n            const galleryCards = data.hits.map(imgDetals => createGalleryCard(imgDetals)).join('');\n        galleryEL.insertAdjacentHTML(\"beforeend\", galleryCards);\n        \n        smoothScroll();\n         \n         const lightbox = new SimpleLightbox('.js-gallery a', {\n        overlay: true,\n        captionsData: 'alt',\n        overlayOpacity: 0.8,\n        captionDelay: 250,\n        focus: true,\n      });\n        lightbox.refresh();\n        if (Math.ceil(data.totalHits / 15) === currentPaga) {\n            loadMoreEl.classList.add('is-hidden')\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results\",\n                position: 'topRight'\n            })\n    }\n} catch (error) {\n    iziToast.error({ message: error.message}); \n}\n}\n\nconst smoothScroll = () => {\n    const { height } = galleryEL.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n  top: height * 2,\n  behavior: \"smooth\",\n});\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreEl.addEventListener('click', onLoadMore)"],"names":["API_KEY","BASE_URL","fetchPhotos","searchQuery","page","urlParams","data","axios","createGalleryCard","imgInfo","currentPaga","searchedValue","searchFormEl","galleryEL","loaderEl","loadMoreEl","showLoader","hideLoader","onSearchFormSubmit","event","iziToast","galleryCards","imgDetals","smoothScroll","SimpleLightbox","error","onLoadMore","height"],"mappings":"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"}