{"version":3,"file":"index.js","sources":["../src/js/pixabay.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '45523262-d0ffc350dbb21d9b3ec29cf8d';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchPhotos = async (searchQuery, page) => {\n  const urlParams = new URLSearchParams({\n    orientation: 'horizontal',\n    image_type: 'photo',\n      safesearch: true,\n      key: API_KEY,\n      q: searchQuery,\n      page: page,\n      per_page: 15,\n  });\n\n    const {data} = await axios.get(`${BASE_URL}?${urlParams}`);\n    return data;\n};","export const createGalleryCard = imgInfo => {\n    return ` <li class=\"gallery-card\">\n    <a href=\"${imgInfo.largeImageURL}\">\n    <img class=\"gallery-img\"\n    src=\"${imgInfo.webformatURL}\" \n    alt=\"${imgInfo.tags}\" />\n    </a>\n    <div class=\"wrapper\">\n    <ul class=\"img-content-wrapper\">\n      <li class=\"text-info\">\n        Likes<span class=\"number\">${imgInfo.likes}</span>\n      </li>\n      <li class=\"text-info\">\n        Views<span class=\"number\">${imgInfo.views}</span>\n      </li>\n      <li class=\"text-info\">\n        Comments<span class=\"number\">${imgInfo.comments}</span>\n      </li>\n      <li class=\"text-info\">\n        Downloads<span class=\"number\">${imgInfo.downloads}</span>\n      </li>\n    </ul>\n  </div>\n    </li>`;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchPhotos } from './js/pixabay.js';\nimport { createGalleryCard } from './js/render-functions.js';\n\nlet currentPaga = 1;\nlet searchedValue = \"\";\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n        overlay: true,\n        captionsData: 'alt',\n        overlayOpacity: 0.8,\n        captionDelay: 250,\n        focus: true,\n      });\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEL = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst inputEl = document.querySelector('.js-search-input')\nconst loadMoreEl = document.querySelector('.loader-more');\n\n\nconst onSearchFormSubmit = async event => {\n\n    event.preventDefault();\n\n    searchedValue = inputEl.value.trim();\n    currentPaga = 1;\n\n    if (searchedValue === '') {\n    iziToast.error({\n      message:\n        'Sorry',\n      position: 'topRight',\n    });\n          loaderEl.classList.add('is-hidden');\n       loadMoreEl.classList.add('is-hidden');\n        return;\n    }\n\n    galleryEL.innerHTML = '';\n    loaderEl.classList.remove('is-hidden');\n    loadMoreEl.classList.add('is-hidden');\n\n    try {\n        const data = await fetchPhotos(searchedValue, currentPaga)\n        \n        if (data.hits.length === 0) {\n            iziToast.error({\n                message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n              loaderEl.classList.add('is-hidden');\n            loadMoreEl.classList.add('is-hidden');\n            galleryEL.innerHTML = '';\n            searchFormEl.reset();\n            return;\n        }\n           \n        const galleryCards = data.hits.map(imgDetals => createGalleryCard(imgDetals)).join('');\n        galleryEL.innerHTML = galleryCards;\n         \n        lightbox.refresh();\n   \n        if (data.totalHits > 15) {\n            loadMoreEl.classList.remove('is-hidden')\n        }\n        if (data.totalHits < 15) {\n      loadMoreEl.classList.add('is-hidden');\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n        }\n          loaderEl.classList.add('is-hidden');\n    } catch (error) {\n        iziToast.error({ message: error.message });\n          loaderEl.classList.add('is-hidden');\n    } finally {\n    loaderEl.classList.add('is-hidden');\n  }\n};\n\nconst onLoadMore = async () => {\n \n    currentPaga++;\n    loaderEl.classList.remove('is-hidden');\n    try {\n        const data = await fetchPhotos(searchedValue, currentPaga)\n         \n        \n            const galleryCards = data.hits.map(imgDetals => createGalleryCard(imgDetals)).join('');\n        galleryEL.insertAdjacentHTML(\"beforeend\", galleryCards);\n        \n        smoothScroll();  \n        lightbox.refresh();\n\n        if (Math.ceil(data.totalHits / 15) === currentPaga) {\n            loadMoreEl.classList.add('is-hidden')\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results\",\n                position: 'topRight'\n            })\n        }\n          loaderEl.classList.add('is-hidden');\n} catch (error) {\n        iziToast.error({ message: error.message }); \n          loaderEl.classList.add('is-hidden');\n} finally {\n    loaderEl.classList.add('is-hidden');\n  }\n}\n\nconst smoothScroll = () => {\n    const { height } = galleryEL.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n  top: height * 2,\n  behavior: \"smooth\",\n});\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreEl.addEventListener('click', onLoadMore)"],"names":["API_KEY","BASE_URL","fetchPhotos","searchQuery","page","urlParams","data","axios","createGalleryCard","imgInfo","currentPaga","searchedValue","lightbox","SimpleLightbox","searchFormEl","galleryEL","loaderEl","inputEl","loadMoreEl","onSearchFormSubmit","event","iziToast","galleryCards","imgDetals","error","onLoadMore","smoothScroll","height"],"mappings":"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"}